<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pixguard - Viewing Link</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="viewer-container">
    <img id="previewImage" src="" alt="Preview" class="preview-img hidden" />

    <div class="button-group">
      <button class="btn primary" onclick="goToAd()">Watch Now</button>
      <button class="btn primary" onclick="goToAd()">Download</button>
    </div>

    <div class="button-group secondary">
      <button class="btn secondary-btn" onclick="goToAd()">Continue to Link</button>
      <button class="btn secondary-btn" onclick="goToAd()">Get Download Link</button>
    </div>

    <!-- Adsterra বা অন্য ব্যানার এখানে বসবে -->
    <div class="ad-banner">
      <p>Advertisement (Adsterra / যেকোনো ব্যানার এখানে বসবে)</p>
      <!-- তোমার Adsterra কোড এখানে পেস্ট করো -->
    </div>

    <div class="note">
      <h3>কিভাবে ভিডিও/ফাইল ডাউনলোড করবেন?</h3>
      <ol>
        <li>“Continue” বাটনে ক্লিক করুন।</li>
        <li>এড এ রিডাইরেক্ট করলে Back করুন।</li>
        <li>৫–৮ সেকেন্ড অপেক্ষা করুন।</li>
        <li>“Get Link” আসলে ক্লিক দিন।</li>
        <li>আবার Back করে Get Link চাপুন।</li>
      </ol>
      <p><strong>নোট:</strong> ভুল পেজ এ নিলে ব্যাক করুন।</p>
    </div>

    <div class="final-btn">
      <button class="btn big-btn" onclick="window.location.href='redirect.html?id=' + getId()">Click Here to Continue</button>
    </div>
  </div>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const id = urlParams.get('id');
    if (!id) {
      document.body.innerHTML = '<h1 style="text-align:center;margin-top:50px;color:red;">Invalid Link!</h1>';
    }

    function getId() { return id; }

    const data = localStorage.getItem('link_' + id);
    if (data) {
      const link = JSON.parse(data);
      if (link.imageData) {
        document.getElementById('previewImage').src = link.imageData;
        document.getElementById('previewImage').classList.remove('hidden');
      }
      window.adUrl = link.adUrl;
      window.contentUrl = link.contentUrl;
    }

    function goToAd() {
      if (window.adUrl) window.open(window.adUrl, '_blank');
    }
  </script>
</body>
</html>

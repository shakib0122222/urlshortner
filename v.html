<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pixguard - Get Link</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container" id="main"></div>

  <script>
    const code = location.pathname.substring(1);
    if (!code || code === "v.html") {
      document.body.innerHTML = "<h2 style='text-align:center;padding:100px;color:#666;'>Create a link from home page</h2>";
      throw new Error("No code");
    }

    try {
      // Base64 ডিকোড
      const padded = code + "===".slice(0, (4 - code.length % 4) % 4);
      const json = decodeURIComponent(escape(atob(padded)));
      const data = JSON.parse(json);

      document.getElementById('main').innerHTML = `
        ${data.i ? `<img src="${data.i}" class="preview-img">` : ''}
        <div class="option-box"><h3>Option 1</h3>
          <div class="btn-pair">
            <button class="btn-left" onclick="ad()">Watch Now</button>
            <button class="btn-right" onclick="ad()">Download</button>
          </div>
        </div>
        <div class="option-box"><h3>Option 2</h3>
          <div class="btn-pair">
            <button class="btn-left alt" onclick="ad()">Continue</button>
            <button class="btn-right alt" onclick="ad()">Get Link</button>
          </div>
        </div>
        <div class="ad-space">Your Adsterra Banner Here</div>
        <div class="note">এড দেখে ব্যাক করুন → Continue চাপুন</div>
        <button onclick="next()" class="btn-continue">Continue to Get Link</button>
      `;

      let clicked = false;
      window.ad = () => window.open(data.a, "_blank");
      window.next = () => {
        if (!clicked) { ad(); clicked = true; }
        else { location.href = "r.html#" + code; }
      };

    } catch (e) {
      document.body.innerHTML = "<h2 style='text-align:center;color:red;padding:100px;'>Invalid or Expired Link!</h2>";
    }
  </script>
</body>
</html>

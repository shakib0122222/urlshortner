<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pixguard - Get Link</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <div id="content"></div>
  </div>

  <footer class="footer">© Pixguard - Dev SAKIB HOSSAIN</footer>

  <script>
    const hash = location.hash.substring(1);
    if (!hash) {
      document.body.innerHTML = "<h2 style='text-align:center;color:red;padding:100px;'>Invalid Link!</h2>";
    }

    try {
      const json = decodeURIComponent(escape(atob(hash)));
      const data = JSON.parse(json);

      document.getElementById('content').innerHTML = `
        ${data.imageData ? `<img src="${data.imageData}" class="preview-img">` : ''}
        <div class="option-box"><h3>Option 1</h3>
          <div class="btn-pair">
            <button class="btn-left" onclick="openAd()">Watch Now</button>
            <button class="btn-right" onclick="openAd()">Download</button>
          </div>
        </div>
        <div class="option-box"><h3>Option 2</h3>
          <div class="btn-pair">
            <button class="btn-left alt" onclick="openAd()">Continue</button>
            <button class="btn-right alt" onclick="openAd()">Get Link</button>
          </div>
        </div>
        <div class="ad-space">Your Adsterra Banner Here</div>
        <div class="note">যেকোনো বাটনে চাপ দিয়ে এড দেখে ব্যাক করুন → Continue চাপুন</div>
        <button onclick="continueToLink()" class="btn-continue">Continue to Get Link</button>
      `;

      let clicked = false;
      window.openAd = () => window.open(data.adUrl, "_blank");
      window.continueToLink = () => {
        if (!clicked) { openAd(); clicked = true; }
        else { location.href = "redirect.html#" + hash; }
      };

    } catch (e) {
      document.body.innerHTML = "<h2 style='text-align:center;color:red;padding:100px;'>Link Error!</h2>";
    }
  </script>
</body>
</html>

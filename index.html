<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pixguard - URL Shortener</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>Pixguard</h1>
      <p>Shorten Links • Earn More</p>
    </header>

    <div class="card">
      <h2>শর্ট লিংক তৈরি করুন</h2>
      <input type="url" id="contentUrl" placeholder="কনটেন্ট লিংক" required>
      <input type="url" id="adUrl" placeholder="এডস লিংক" required>
      <input type="file" id="imageUpload" accept="image/*">
      <button onclick="createLink()" class="btn-create">Create Short Link</button>
    </div>

    <div id="result" class="card result hidden">
      <p>তোমার ছোট লিংক তৈরি হয়েছে!</p>
      <input type="text" id="shortLink" readonly>
      <button onclick="copyLink()" class="btn-copy">কপি করুন</button>
    </div>
  </div>

  <footer class="footer">© Pixguard - Dev SAKIB HOSSAIN</footer>

  <script>
    function createLink() {
      const contentUrl = document.getElementById('contentUrl').value.trim();
      const adUrl = document.getElementById('adUrl').value.trim();
      const file = document.getElementById('imageUpload').files[0];

      if (!contentUrl || !adUrl) return alert("দুটি লিংক দিতে হবে!");

      let imageData = "";
      if (file) {
        const reader = new FileReader();
        reader.onload = () => {
          imageData = reader.result;
          generateShortLink(contentUrl, adUrl, imageData);
        };
        reader.readAsDataURL(file);
      } else {
        generateShortLink(contentUrl, adUrl, "");
      }
    }

    function generateShortLink(contentUrl, adUrl, imageData) {
      const data = { contentUrl, adUrl, imageData };
      const json = JSON.stringify(data);
      const encoded = btoa(unescape(encodeURIComponent(json)));
      const shortUrl = location.origin + location.pathname + "#" + encoded;

      document.getElementById('shortLink').value = shortUrl;
      document.getElementById('result').classList.remove('hidden');
    }

    function copyLink() {
      const input = document.getElementById('shortLink');
      input.select();
      document.execCommand('copy');
      alert('কপি হয়েছে!');
    }
  </script>
</body>
</html>
